# webgal_mano

`webgal_mano` æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º WebGAL å’Œ PIXI.js è®¾è®¡çš„**åˆ†å±‚ç«‹ç»˜æ¸²æŸ“å¼•æ“**ã€‚å®ƒå®Œç¾è¿˜åŸäº†åˆ†å±‚ç«‹ç»˜ç¼–è¾‘å™¨çš„æ¸²æŸ“é€»è¾‘ï¼Œæ”¯æŒåŸºç¡€å±‚å åŠ ã€å§¿åŠ¿å‚æ•°åŒ–åˆ‡æ¢ä»¥åŠç²¾ç»†çš„å·®åˆ†ç»†èŠ‚è°ƒæ•´ã€‚

## ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½æ¸²æŸ“**ï¼šåŸºäº PIXI.js åŸç”Ÿå®¹å™¨ï¼Œæ”¯æŒå›¾å±‚æ’åºå’Œæ··åˆæ¨¡å¼ï¼ˆOverlay, Softlight, Multiplyï¼‰ã€‚
- ğŸ­ **å§¿åŠ¿å åŠ ç³»ç»Ÿ**ï¼šæ”¯æŒåŒæ—¶æ¿€æ´»å¤šä¸ªå§¿åŠ¿ï¼ˆå¦‚ï¼šå·¦æ‰‹åŠ¨ä½œ + å³æ‰‹åŠ¨ä½œ + è¡¨æƒ…ï¼‰ï¼Œè‡ªåŠ¨å¤„ç†åŒç»„å†²çªã€‚
- ğŸ” **å·®åˆ†ç»†èŠ‚è°ƒæ•´**ï¼šæ”¯æŒåœ¨å§¿åŠ¿åŸºç¡€ä¸Šï¼Œæ‰‹åŠ¨å¼€å…³ä»»æ„ç»†ä¸‹å›¾å±‚ã€‚
- ğŸ”Œ **æ˜“äºé›†æˆ**ï¼šä»…éœ€åŠ è½½ä¸€ä¸ª JSON é…ç½®æ–‡ä»¶å³å¯è¿è¡Œã€‚

## å®‰è£…

```bash
npm install webgal_mano
```

## æ ¸å¿ƒ API ä½¿ç”¨æ–¹æ³•

### 1. åˆå§‹åŒ–æ’­æ”¾å™¨

```typescript
import { CharacterPlayer } from 'webgal_mano';

// åŠ è½½ä»ç¼–è¾‘å™¨å¯¼å‡ºçš„ model.char.json
const modelData = await fetch('model.char.json').then(r => r.json());

// å®ä¾‹åŒ–
const player = new CharacterPlayer(modelData);
app.stage.addChild(player);

// åˆå§‹é‡ç½®ï¼ˆåº”ç”¨åŸºç¡€èº«ä½“å’Œé»˜è®¤å§¿åŠ¿ï¼‰
player.resetToDefault();
```

### 2. å§¿åŠ¿ä¸è¡¨æƒ…åˆ‡æ¢ (ä»¿å‚æ•°åŒ–)

`setPose` ä¼šè‡ªåŠ¨è¯†åˆ«å½“å‰å§¿åŠ¿å±äºå“ªä¸ªç»„ï¼ˆå¦‚ `ArmL`ï¼‰ï¼Œå¹¶æ›¿æ¢æ‰è¯¥ç»„ä¹‹å‰çš„åŠ¨ä½œï¼Œè¿™ä¸ Live2D çš„å‚æ•°æ»‘åŠ¨æ•ˆæœä¸€è‡´ã€‚

```typescript
// åˆ‡æ¢è¡¨æƒ…ï¼ˆä¸å½±å“èº«ä½“å’Œæ‰‹è‡‚ï¼‰
player.setPose('Smile1');

// åˆ‡æ¢å·¦æ‰‹åŠ¨ä½œï¼ˆä¸å½±å“è¡¨æƒ…å’Œå³æ‰‹ï¼‰
player.setPose('ArmL11');
```

### 3. å·®åˆ†ç»†èŠ‚è°ƒæ•´ (Manual Overrides)

å¦‚æœä½ éœ€è¦æ¯”â€œå§¿åŠ¿é¢„è®¾â€æ›´ç²¾ç»†çš„æ§åˆ¶ï¼ˆä¾‹å¦‚ï¼šå•ç‹¬å¼€å¯æ±—æ°´ã€æµæ³ªã€æ”¹å˜è…®çº¢ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨æ‰‹åŠ¨è¦†ç›–æ¥å£ã€‚**æ‰‹åŠ¨è¦†ç›–çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œä¼šè¦†ç›–å§¿åŠ¿é¢„è®¾çš„çŠ¶æ€ã€‚**

```typescript
// æ‰‹åŠ¨å¼€å¯ç‰¹å®šå›¾å±‚
player.setLayerVisible('Angle01/Facial/Sweat/Sweat01', true);

// æ‰‹åŠ¨å…³é—­ç‰¹å®šå›¾å±‚
player.setLayerVisible('Angle01/Facial/Cheeks/Cheeks_Normal', false);

// æ¸…é™¤ç‰¹å®šç»„çš„æ‰‹åŠ¨è°ƒæ•´ï¼ˆæ¢å¤åˆ°ç”±å§¿åŠ¿é¢„è®¾æ§åˆ¶ï¼‰
player.clearGroupOverrides('Angle01/Facial/Sweat');
```

### 4. è¾…åŠ©æ–¹æ³•

```typescript
// å åŠ ä¸€ä¸ªå§¿åŠ¿ï¼ˆä¸ç§»é™¤å†²çªå§¿åŠ¿ï¼Œç”¨äºç‰¹æ®Šå¤šå±‚å åŠ ï¼‰
player.addPose('ExtraLayer');

// ç§»é™¤ä¸€ä¸ªå§¿åŠ¿
player.removePose('ArmL11');

// å…¨å±€é‡ç½®ï¼ˆæ¸…é™¤æ‰€æœ‰å§¿åŠ¿å’Œæ‰‹åŠ¨ç»†èŠ‚è°ƒæ•´ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼‰
player.resetToDefault();
```

## æ•°æ®æ ¼å¼è¯´æ˜

è¯¥åº“é…åˆ [Character Editor](https://github.com/konshinhaoshin/character_editor) ä½¿ç”¨ã€‚æ‰“åŒ…åç”Ÿæˆçš„ `model.char.json` åŒ…å«ï¼š
- `assets.layers`: å›¾å±‚å®šä¹‰ã€é¡ºåºã€æ··åˆæ¨¡å¼ã€‚
- `controller.baseLayers`: é»˜è®¤å¼€å¯çš„å¸¸é©»å›¾å±‚ï¼ˆå¦‚ï¼šBody, Blendingï¼‰ã€‚
- `controller.defaultPoses`: åˆå§‹åŒ–çš„é¢„è®¾ç»„åˆã€‚
- `controller.poses`: æ‰€æœ‰å¯è°ƒç”¨çš„åŠ¨ä½œ/è¡¨æƒ…é¢„è®¾æŒ‡ä»¤ã€‚

## è®¸å¯è¯

MIT
